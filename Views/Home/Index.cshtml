@page

<head>
    <link href="/css/fontawesome.all.min.css" rel="stylesheet">
</head>

<style>
    .monsters 
    , .items{
        border: 1px solid black;
        padding: 1em;
        margin: 1em;
    }

    .panel3 {
        display:inline-block;
        float:left;
        width: 400px;
    }

    .item.clickable:hover {
        color: white;
        background: black;
    }

    .item.non-clickable:hover {
        background: #EEE;
    }

    .item.selected {
        background: lightblue;
    }

    .itemPendingServerUpdate { 
        color: #666;
        background: #eee;
    }

    .item-description-tooltip {
        color: black;
        background: white;
        border: 1px solid black;
        padding: .5em;
    }
    
    .item {
        cursor: default;
    }

</style>

<div id="app">
    <div v-if="!gameState.isLoaded" class="loading">
        Loading...
    </div>
    <div v-if="gameState.isLoaded">
        <div>
            <div class="panel3">
                game log:
                <textarea rows="20" cols="50" readonly class="messages">
                    {{ uiState.logMessages }}
                </textarea>

                <div>
                    money: {{ playerState.money }}
                </div>

                <div>
                    digging: {{ digState.hasDigState && !digState.isPaused }}
                    <div v-if="digState.hasDigState">
                        <div>

                        depth: {{ digState.depth }}
                            </div>
                        fuel: {{ digState.fuel }}
                    </div>
                </div>

                <button v-if="!digState.hasDigState || digState.isPaused" v-on:click="startDigging">start dig</button>
                <button v-if="digState.hasDigState && !digState.isPaused" v-on:click="stopDigging">stop dig</button>
                <button v-if="digState.hasDigState" v-on:click="returnToSurface">return to surface</button>
            </div>
            <div class="panel3">
                <div class="monsters">
                    <h3>Nearby monsters</h3>
                    <br>
                    <div v-for="monster in digState.nearbyMonsters">
                        {{ monster.name }} ({{ monster.currentHealth }} / {{ monster.maxHealth }})
                    </div>
                </div>
            </div>
            <div class="panel3">
                <div class="items">
                    <h3>Items</h3>
                    <br>
                    <hr/>
                    <b>Equipped:</b>
                    <br>
                    <div v-for="playerItem in itemState" v-if="playerItem.isEquipped">
                        <div v-bind:class="getBackpackItemCssClass(playerItem)" v-on:click="backpackItemClicked(playerItem)">
                            <digsite-item :item="playerItem"/>
                        </div>
                    </div>
                    <hr/>

                    <div v-for="playerItem in itemState" v-if="!playerItem.isEquipped">
                        <div v-bind:class="getBackpackItemCssClass(playerItem)" v-on:click="backpackItemClicked(playerItem)">
                            <digsite-item :item="playerItem"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div style="clear:both;">

item upgrader
        <digsite-item-upgrader :items="itemState" :player-id="gameState.playerId"/>
        </div>

    </div>
</div>

<script src="~/lib/signalr/dist/browser/signalr.js"></script>
<script src="~/js/vue.js"></script>
<script src="~/js/vue-item.js"></script>
<script src="~/js/vue-item-upgrader.js"></script>
<script src="~/js/vue-app.js"></script>